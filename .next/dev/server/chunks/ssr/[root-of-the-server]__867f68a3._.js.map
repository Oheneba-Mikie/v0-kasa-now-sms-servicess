{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/awx1463934/Desktop/CODES/Kasanow/v0-kasa-now-sms-servicess/lib/supabase.ts"],"sourcesContent":["\r\nimport { createClient } from '@supabase/supabase-js'\r\n\r\nconst supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL!\r\nconst supabaseKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!\r\n\r\nexport const supabase = createClient(supabaseUrl, supabaseKey)\r\n"],"names":[],"mappings":";;;;AACA;;AAEA,MAAM;AACN,MAAM;AAEC,MAAM,WAAW,IAAA,uLAAY,EAAC,aAAa"}},
    {"offset": {"line": 23, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/awx1463934/Desktop/CODES/Kasanow/v0-kasa-now-sms-servicess/app/actions/join-waitlist.ts"],"sourcesContent":["'use server'\r\n\r\nimport { supabase } from '@/lib/supabase'\r\nimport { Resend } from 'resend'\r\n\r\n// Initialize Resend with key from env\r\nconst resend = new Resend(process.env.RESEND_API_KEY)\r\n\r\nexport async function joinWaitlist(email: string) {\r\n    try {\r\n        // 1. Validate input (basic check, could use zod)\r\n        if (!email || !email.includes('@')) {\r\n            return { success: false, message: 'Invalid email address' }\r\n        }\r\n\r\n        // 2. Insert into Supabase\r\n        const { error: dbError } = await supabase\r\n            .from('waitlist')\r\n            .insert([{ email, status: 'pending' }])\r\n\r\n        if (dbError) {\r\n            // Handle duplicate email specifically if possible\r\n            if (dbError.code === '23505') { // Postgres unique violation code\r\n                return { success: true, message: 'You are already on the waitlist!' }\r\n            }\r\n            console.error('Database error:', dbError)\r\n            return { success: false, message: 'Failed to join waitlist. Please try again.' }\r\n        }\r\n\r\n        // 3. Send Email via Resend\r\n        // Note: We wrap this in try/catch to not fail the whole request if email fails, \r\n        // but ideally we want both to succeed.\r\n        try {\r\n            await sendWelcomeEmail(email)\r\n        } catch (e) {\r\n            console.error('Email sending failed:', e)\r\n        }\r\n\r\n        return { success: true, message: 'Successfully joined the waitlist!' }\r\n\r\n    } catch (err) {\r\n        console.error('Unexpected error:', err)\r\n        return { success: false, message: 'An unexpected error occurred.' }\r\n    }\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;;;;;AAEA,sCAAsC;AACtC,MAAM,SAAS,IAAI,kJAAM,CAAC,QAAQ,GAAG,CAAC,cAAc;AAE7C,eAAe,aAAa,KAAa;IAC5C,IAAI;QACA,iDAAiD;QACjD,IAAI,CAAC,SAAS,CAAC,MAAM,QAAQ,CAAC,MAAM;YAChC,OAAO;gBAAE,SAAS;gBAAO,SAAS;YAAwB;QAC9D;QAEA,0BAA0B;QAC1B,MAAM,EAAE,OAAO,OAAO,EAAE,GAAG,MAAM,2HAAQ,CACpC,IAAI,CAAC,YACL,MAAM,CAAC;YAAC;gBAAE;gBAAO,QAAQ;YAAU;SAAE;QAE1C,IAAI,SAAS;YACT,kDAAkD;YAClD,IAAI,QAAQ,IAAI,KAAK,SAAS;gBAC1B,OAAO;oBAAE,SAAS;oBAAM,SAAS;gBAAmC;YACxE;YACA,QAAQ,KAAK,CAAC,mBAAmB;YACjC,OAAO;gBAAE,SAAS;gBAAO,SAAS;YAA6C;QACnF;QAEA,2BAA2B;QAC3B,iFAAiF;QACjF,uCAAuC;QACvC,IAAI;YACA,MAAM,iBAAiB;QAC3B,EAAE,OAAO,GAAG;YACR,QAAQ,KAAK,CAAC,yBAAyB;QAC3C;QAEA,OAAO;YAAE,SAAS;YAAM,SAAS;QAAoC;IAEzE,EAAE,OAAO,KAAK;QACV,QAAQ,KAAK,CAAC,qBAAqB;QACnC,OAAO;YAAE,SAAS;YAAO,SAAS;QAAgC;IACtE;AACJ;;;IApCsB;;AAAA,+OAAA"}},
    {"offset": {"line": 95, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/awx1463934/Desktop/CODES/Kasanow/v0-kasa-now-sms-servicess/.next-internal/server/app/waitlist/page/actions.js%20%28server%20actions%20loader%29"],"sourcesContent":["export {joinWaitlist as '40807be106533d4006da9c4d8ad09ed86b97d8116a'} from 'ACTIONS_MODULE0'\n"],"names":[],"mappings":";AAAA"}}]
}